{"name": "测试添加用户接口", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 502，响应内容: \nassert 502 in [200, 201]\n +  where 502 = <Response [502]>.status_code", "trace": "self = <test_cases.api.system_manager.users.test_add_user.TestAddUser object at 0x1030b99d0>\napi = <common.api_client.ApiClient object at 0x10320bd30>\nlogger = <Logger himool_auto_case (INFO)>\ntoken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQzOTUxMzIzLCJpYXQiOjE3NDM5NTA3MjMsImp0aSI6IjlmMTAwMDRjZDE2YjQ1OWY4YjExNjNlMzg0N2RmNGNiIiwidXNlcl9pZCI6MX0.mw3iFKMqncwxxFi9cZ9VNsDMc_ULAdk_t9JcG1ajDBs'\n\n    @allure.title(\"测试添加用户接口\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_add_user(self, api, logger, token):\n        \"\"\"\n        测试添加用户接口\n        :param api: API客户端\n        :param logger: 日志记录器\n        :param token: 认证token\n        \"\"\"\n        # 准备测试数据\n        random_num = random.randint(1000, 9999)\n        user_data = {\n            \"username\": f\"testuser{random_num}\",\n            \"name\": f\"测试用户{random_num}\",\n            \"phone\": f\"1380000{random_num}\",\n            \"email\": f\"test{random_num}@example.com\",\n            \"sex\": \"man\",\n            \"roles\": [1],  # 假设1是有效的角色ID\n            \"is_active\": True\n        }\n    \n        logger.info(f\"开始测试添加用户接口，测试数据: {user_data}\")\n    \n        # 发送POST请求到添加用户接口\n        # 使用配置中的API基础URL，不要硬编码\n        # 从配置中获取API基础URL\n        endpoint = \"/api/users\"\n    \n        # 使用fixture提供的token设置认证头\n        headers = {}\n        if token:\n            headers['Authorization'] = f'Bearer {token}'\n    \n        response = api.post(endpoint, json_data=user_data, headers=headers)\n    \n        # 断言响应状态码\n>       assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}，响应内容: {response.text}\"\nE       AssertionError: 添加用户失败，状态码: 502，响应内容: \nE       assert 502 in [200, 201]\nE        +  where 502 = <Response [502]>.status_code\n\ntest_cases/api/system_manager/users/test_add_user.py:54: AssertionError"}, "description": "\n        测试添加用户接口\n        :param api: API客户端\n        :param logger: 日志记录器\n        :param token: 认证token\n        ", "attachments": [{"name": "log", "source": "7892bf73-b346-44f7-b951-650884de1707-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "971653b1-9294-454e-ab12-512d7da958bc-attachment.txt", "type": "text/plain"}], "start": 1743950723267, "stop": 1743950725231, "uuid": "e87e9d1d-203a-4f05-b71a-0d74d38467bd", "historyId": "a74693fac0e53fbcf7ce5d272ee3327e", "testCaseId": "a74693fac0e53fbcf7ce5d272ee3327e", "fullName": "test_cases.api.system_manager.users.test_add_user.TestAddUser#test_add_user", "labels": [{"name": "story", "value": "用户管理"}, {"name": "feature", "value": "系统管理"}, {"name": "severity", "value": "critical"}, {"name": "parentSuite", "value": "test_cases.api.system_manager.users"}, {"name": "suite", "value": "test_add_user"}, {"name": "subSuite", "value": "TestAddUser"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "63040-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.api.system_manager.users.test_add_user"}]}