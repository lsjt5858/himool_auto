{"name": "测试添加用户接口", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 400\nassert 400 in [200, 201]\n +  where 400 = <Response [400]>.status_code", "trace": "self = <test_cases.api.system_manager.users.test_add_user_management.TestUserManagement object at 0x103e674f0>\napi_client = <common.api_client.ApiClient object at 0x103e67c40>\n\n    @allure.story(\"用户管理\")\n    @allure.title(\"测试添加用户接口\")\n    def test_add_user(self, api_client):\n        \"\"\"\n        测试添加用户API接口\n        \"\"\"\n        # 设置请求参数\n        endpoint = \"api/users\"\n        payload = {\n            \"username\": \"testuser\",\n            \"name\": \"测试用户\",\n            \"phone\": \"13800138000\",\n            \"email\": \"test@example.com\",\n            \"sex\": \"man\",\n            \"roles\": [1],  # 使用1作为角色ID，确保该角色存在\n            \"is_active\": True\n        }\n    \n        # 添加测试步骤\n        with allure.step(\"发送添加用户请求\"):\n            allure.attach(json.dumps(payload, ensure_ascii=False, indent=2),\n                         \"请求参数\", allure.attachment_type.JSON)\n            response = api_client.post(endpoint, json_data=payload)\n    \n        # 记录响应结果\n        with allure.step(\"获取响应结果\"):\n            allure.attach(response.text, \"响应内容\", allure.attachment_type.TEXT)\n            allure.attach(str(response.status_code), \"状态码\", allure.attachment_type.TEXT)\n    \n        # 断言响应状态码\n        with allure.step(\"验证响应状态码\"):\n>           assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\nE           AssertionError: 添加用户失败，状态码: 400\nE           assert 400 in [200, 201]\nE            +  where 400 = <Response [400]>.status_code\n\ntest_cases/api/system_manager/users/test_add_user_management.py:47: AssertionError"}, "description": "\n        测试添加用户API接口\n        ", "steps": [{"name": "发送添加用户请求", "status": "passed", "attachments": [{"name": "请求参数", "source": "e05e2e12-5e7e-4ff2-af41-4f8213d3c03e-attachment.json", "type": "application/json"}], "start": 1743952877487, "stop": 1743952877500}, {"name": "获取响应结果", "status": "passed", "attachments": [{"name": "响应内容", "source": "fe2a1039-cf29-4bb5-b48b-75c0570e69fd-attachment.txt", "type": "text/plain"}, {"name": "状态码", "source": "56b6f562-f713-424a-a7bf-f7443fa50906-attachment.txt", "type": "text/plain"}], "start": 1743952877500, "stop": 1743952877500}, {"name": "验证响应状态码", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 400\nassert 400 in [200, 201]\n +  where 400 = <Response [400]>.status_code\n", "trace": "  File \"/Users/Apple/PycharmProjects/himool_auto_case/test_cases/api/system_manager/users/test_add_user_management.py\", line 47, in test_add_user\n    assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\n"}, "start": 1743952877500, "stop": 1743952877500}], "attachments": [{"name": "log", "source": "36c3640d-cd6e-47fd-980f-355f89e4a4e3-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "d06815a7-4359-427b-b129-38faaf23760f-attachment.txt", "type": "text/plain"}], "start": 1743952877487, "stop": 1743952877501, "uuid": "cc9a1ae6-415a-443c-8117-220687a21f13", "historyId": "592d77fea9d38e1bd03f015dcc9e648b", "testCaseId": "592d77fea9d38e1bd03f015dcc9e648b", "fullName": "test_cases.api.system_manager.users.test_add_user_management.TestUserManagement#test_add_user", "labels": [{"name": "feature", "value": "系统管理"}, {"name": "epic", "value": "API测试"}, {"name": "story", "value": "用户管理"}, {"name": "parentSuite", "value": "test_cases.api.system_manager.users"}, {"name": "suite", "value": "test_add_user_management"}, {"name": "subSuite", "value": "TestUserManagement"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "82653-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.api.system_manager.users.test_add_user_management"}]}