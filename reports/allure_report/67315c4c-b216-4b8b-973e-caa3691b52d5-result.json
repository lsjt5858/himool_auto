{"name": "测试登录接口", "status": "failed", "statusDetails": {"message": "AssertionError: 响应中没有token字段\nassert 'token' in {'refresh': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTc0NDcyNTQwNiwiaWF0IjoxNzQzODYxNDA2LCJqdGkiOiI2YWQ1OTg0ODMzMjY0ZmYxYWVkZTZmMWU1NWE1ZmQ1ZCIsInVzZXJfaWQiOjF9.a__5ip_BLyU6ewsCSBytJUvmupuO9O_wKNA650p7p6E', 'access': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQzODYyMDA2LCJpYXQiOjE3NDM4NjE0MDYsImp0aSI6IjkyMjc5YWVkYmUyODQ0M2Q4YTExZWJlMTU1Mzc0YjgzIiwidXNlcl9pZCI6MX0.UF7HtxhUrkJtayigS3QQry06DhwQvi5a6dZAejuNndk'}", "trace": "self = <test_login.TestLogin object at 0x1041ee880>\n\n    @allure.story(\"用户登录\")\n    @allure.title(\"测试登录接口\")\n    def test_login(self):\n        \"\"\"\n        测试登录API接口\n        \"\"\"\n        # 设置请求URL和参数\n        url = \"http://localhost:8080/api/user/get_token/\"\n        payload = {\n            \"number\": \"001\",\n            \"password\": \"Lx123456\",\n            \"username\": \"admin\"\n        }\n    \n        # 添加测试步骤\n        with allure.step(\"发送登录请求\"):\n            allure.attach(json.dumps(payload, ensure_ascii=False, indent=2),\n                         \"请求参数\", allure.attachment_type.JSON)\n            response = requests.post(url, json=payload)\n    \n        # 记录响应结果\n        with allure.step(\"获取响应结果\"):\n            allure.attach(response.text, \"响应内容\", allure.attachment_type.TEXT)\n            allure.attach(str(response.status_code), \"状态码\", allure.attachment_type.TEXT)\n    \n        # 断言响应状态码\n        with allure.step(\"验证响应状态码\"):\n            assert response.status_code == 200, f\"登录失败，状态码: {response.status_code}\"\n    \n        # 断言响应内容\n        with allure.step(\"验证响应内容\"):\n            resp_data = response.json()\n>           assert \"token\" in resp_data, \"响应中没有token字段\"\nE           AssertionError: 响应中没有token字段\nE           assert 'token' in {'refresh': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTc0NDcyNTQwNiwiaWF0IjoxNzQzODYxNDA2LCJqdGkiOiI2YWQ1OTg0ODMzMjY0ZmYxYWVkZTZmMWU1NWE1ZmQ1ZCIsInVzZXJfaWQiOjF9.a__5ip_BLyU6ewsCSBytJUvmupuO9O_wKNA650p7p6E', 'access': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQzODYyMDA2LCJpYXQiOjE3NDM4NjE0MDYsImp0aSI6IjkyMjc5YWVkYmUyODQ0M2Q4YTExZWJlMTU1Mzc0YjgzIiwidXNlcl9pZCI6MX0.UF7HtxhUrkJtayigS3QQry06DhwQvi5a6dZAejuNndk'}\n\ntest_cases/api/test_login.py:46: AssertionError"}, "description": "\n        测试登录API接口\n        ", "steps": [{"name": "发送登录请求", "status": "passed", "attachments": [{"name": "请求参数", "source": "30522f27-12ac-40b3-909d-205b93d2cd01-attachment.json", "type": "application/json"}], "start": 1743861405806, "stop": 1743861406033}, {"name": "获取响应结果", "status": "passed", "attachments": [{"name": "响应内容", "source": "5a86f917-277a-43ad-8563-fe67267833c0-attachment.txt", "type": "text/plain"}, {"name": "状态码", "source": "3d79a1e8-d63d-4e33-a6b6-6dc87bd4c366-attachment.txt", "type": "text/plain"}], "start": 1743861406033, "stop": 1743861406034}, {"name": "验证响应状态码", "status": "passed", "start": 1743861406034, "stop": 1743861406034}, {"name": "验证响应内容", "status": "failed", "statusDetails": {"message": "AssertionError: 响应中没有token字段\nassert 'token' in {'refresh': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTc0NDcyNTQwNiwiaWF0IjoxNzQzODYxNDA2LCJqdGkiOiI2YWQ1OTg0ODMzMjY0ZmYxYWVkZTZmMWU1NWE1ZmQ1ZCIsInVzZXJfaWQiOjF9.a__5ip_BLyU6ewsCSBytJUvmupuO9O_wKNA650p7p6E', 'access': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQzODYyMDA2LCJpYXQiOjE3NDM4NjE0MDYsImp0aSI6IjkyMjc5YWVkYmUyODQ0M2Q4YTExZWJlMTU1Mzc0YjgzIiwidXNlcl9pZCI6MX0.UF7HtxhUrkJtayigS3QQry06DhwQvi5a6dZAejuNndk'}\n", "trace": "  File \"/Users/Apple/PycharmProjects/himool_auto_case/test_cases/api/test_login.py\", line 46, in test_login\n    assert \"token\" in resp_data, \"响应中没有token字段\"\n"}, "start": 1743861406034, "stop": 1743861406034}], "start": 1743861405806, "stop": 1743861406035, "uuid": "fc96e59e-b93f-4de7-b86f-165f2b344a62", "historyId": "35d8ee3fa9dc259cd65dc29ff641b84d", "testCaseId": "35d8ee3fa9dc259cd65dc29ff641b84d", "fullName": "test_cases.api.test_login.TestLogin#test_login", "labels": [{"name": "story", "value": "用户登录"}, {"name": "epic", "value": "API测试"}, {"name": "feature", "value": "用户管理"}, {"name": "parentSuite", "value": "test_cases.api"}, {"name": "suite", "value": "test_login"}, {"name": "subSuite", "value": "TestLogin"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "92208-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.api.test_login"}]}