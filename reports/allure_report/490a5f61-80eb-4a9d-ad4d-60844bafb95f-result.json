{"name": "测试添加用户接口", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 400\nassert 400 in [200, 201]\n +  where 400 = <Response [400]>.status_code", "trace": "self = <test_cases.api.system_manager.users.test_user_management.TestUserManagement object at 0x1050093d0>\napi_client = <common.api_client.ApiClient object at 0x105078c10>\n\n    @allure.story(\"用户管理\")\n    @allure.title(\"测试添加用户接口\")\n    def test_add_user(self, api_client):\n        \"\"\"\n        测试添加用户API接口\n        \"\"\"\n        # 设置请求参数\n        endpoint = \"api/users\"\n        payload = {\n            \"username\": \"testuser\",\n            \"name\": \"测试用户\",\n            \"phone\": \"13800138000\",\n            \"email\": \"test@example.com\",\n            \"sex\": \"man\",\n            \"roles\": [0],  # 使用0作为角色ID\n            \"is_active\": True\n        }\n    \n        # 添加测试步骤\n        with allure.step(\"发送添加用户请求\"):\n            allure.attach(json.dumps(payload, ensure_ascii=False, indent=2),\n                         \"请求参数\", allure.attachment_type.JSON)\n            response = api_client.post(endpoint, json_data=payload)\n    \n        # 记录响应结果\n        with allure.step(\"获取响应结果\"):\n            allure.attach(response.text, \"响应内容\", allure.attachment_type.TEXT)\n            allure.attach(str(response.status_code), \"状态码\", allure.attachment_type.TEXT)\n    \n        # 断言响应状态码\n        with allure.step(\"验证响应状态码\"):\n>           assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\nE           AssertionError: 添加用户失败，状态码: 400\nE           assert 400 in [200, 201]\nE            +  where 400 = <Response [400]>.status_code\n\ntest_cases/api/system_manager/users/test_user_management.py:47: AssertionError"}, "description": "\n        测试添加用户API接口\n        ", "steps": [{"name": "发送添加用户请求", "status": "passed", "attachments": [{"name": "请求参数", "source": "412c35b9-432b-4209-966e-e68e26d75883-attachment.json", "type": "application/json"}], "start": 1743952784036, "stop": 1743952784058}, {"name": "获取响应结果", "status": "passed", "attachments": [{"name": "响应内容", "source": "a7aeffe4-1a3c-466d-abb1-355218494dcc-attachment.txt", "type": "text/plain"}, {"name": "状态码", "source": "cd778acc-3ff5-48a8-a2d1-a1e5827373df-attachment.txt", "type": "text/plain"}], "start": 1743952784058, "stop": 1743952784058}, {"name": "验证响应状态码", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 400\nassert 400 in [200, 201]\n +  where 400 = <Response [400]>.status_code\n", "trace": "  File \"/Users/Apple/PycharmProjects/himool_auto_case/test_cases/api/system_manager/users/test_user_management.py\", line 47, in test_add_user\n    assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\n"}, "start": 1743952784058, "stop": 1743952784058}], "attachments": [{"name": "log", "source": "8d3f3cd1-ceaa-4abd-a7bf-3fda695a2f62-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "8b3a1e59-a728-4e75-b30a-ee8dcccfee15-attachment.txt", "type": "text/plain"}], "start": 1743952784036, "stop": 1743952784061, "uuid": "e34bf800-3b07-41d6-b3d1-8886839e96d1", "historyId": "7fe1d569f6fe623e59ef054f9340143d", "testCaseId": "7fe1d569f6fe623e59ef054f9340143d", "fullName": "test_cases.api.system_manager.users.test_user_management.TestUserManagement#test_add_user", "labels": [{"name": "feature", "value": "系统管理"}, {"name": "epic", "value": "API测试"}, {"name": "story", "value": "用户管理"}, {"name": "parentSuite", "value": "test_cases.api.system_manager.users"}, {"name": "suite", "value": "test_user_management"}, {"name": "subSuite", "value": "TestUserManagement"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "81758-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.api.system_manager.users.test_user_management"}]}