{"name": "测试添加用户接口", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 500\nassert 500 in [200, 201]\n +  where 500 = <Response [500]>.status_code", "trace": "self = <test_cases.api.system_manager.users.test_user_management.TestUserManagement object at 0x106c1b5e0>\napi_client = <common.api_client.ApiClient object at 0x106c76790>\n\n    @allure.story(\"用户管理\")\n    @allure.title(\"测试添加用户接口\")\n    def test_add_user(self, api_client):\n        \"\"\"\n        测试添加用户API接口\n        \"\"\"\n        # 设置请求参数\n        endpoint = \"api/users\"\n        payload = {\n            \"username\": \"testuser\",\n            \"name\": \"测试用户\",\n            \"phone\": \"13800138000\",\n            \"email\": \"test@example.com\",\n            \"sex\": \"man\",\n            \"roles\": [0],  # 使用0作为角色ID\n            \"is_active\": True\n        }\n    \n        # 添加测试步骤\n        with allure.step(\"发送添加用户请求\"):\n            allure.attach(json.dumps(payload, ensure_ascii=False, indent=2),\n                         \"请求参数\", allure.attachment_type.JSON)\n            response = api_client.post(endpoint, json_data=payload)\n    \n        # 记录响应结果\n        with allure.step(\"获取响应结果\"):\n            allure.attach(response.text, \"响应内容\", allure.attachment_type.TEXT)\n            allure.attach(str(response.status_code), \"状态码\", allure.attachment_type.TEXT)\n    \n        # 断言响应状态码\n        with allure.step(\"验证响应状态码\"):\n>           assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\nE           AssertionError: 添加用户失败，状态码: 500\nE           assert 500 in [200, 201]\nE            +  where 500 = <Response [500]>.status_code\n\ntest_cases/api/system_manager/users/test_user_management.py:47: AssertionError"}, "description": "\n        测试添加用户API接口\n        ", "steps": [{"name": "发送添加用户请求", "status": "passed", "attachments": [{"name": "请求参数", "source": "d859dc79-ccf7-4ce3-93a7-1cf3130bffb7-attachment.json", "type": "application/json"}], "start": 1743952541371, "stop": 1743952541409}, {"name": "获取响应结果", "status": "passed", "attachments": [{"name": "响应内容", "source": "d4cd62a7-9e74-4855-a63b-472a7911a716-attachment.txt", "type": "text/plain"}, {"name": "状态码", "source": "a92b12c4-92a2-45cf-9a8f-b764f73e2ce9-attachment.txt", "type": "text/plain"}], "start": 1743952541410, "stop": 1743952541410}, {"name": "验证响应状态码", "status": "failed", "statusDetails": {"message": "AssertionError: 添加用户失败，状态码: 500\nassert 500 in [200, 201]\n +  where 500 = <Response [500]>.status_code\n", "trace": "  File \"/Users/Apple/PycharmProjects/himool_auto_case/test_cases/api/system_manager/users/test_user_management.py\", line 47, in test_add_user\n    assert response.status_code in [200, 201], f\"添加用户失败，状态码: {response.status_code}\"\n"}, "start": 1743952541410, "stop": 1743952541410}], "attachments": [{"name": "log", "source": "932838af-9e6c-4093-8736-9c86865713a1-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "ebcc0116-bb6d-48d3-9758-64e79498b4d3-attachment.txt", "type": "text/plain"}], "start": 1743952541371, "stop": 1743952541412, "uuid": "28bd9d79-8ff2-4e4b-bb29-f11926d37707", "historyId": "7fe1d569f6fe623e59ef054f9340143d", "testCaseId": "7fe1d569f6fe623e59ef054f9340143d", "fullName": "test_cases.api.system_manager.users.test_user_management.TestUserManagement#test_add_user", "labels": [{"name": "epic", "value": "API测试"}, {"name": "story", "value": "用户管理"}, {"name": "feature", "value": "系统管理"}, {"name": "parentSuite", "value": "test_cases.api.system_manager.users"}, {"name": "suite", "value": "test_user_management"}, {"name": "subSuite", "value": "TestUserManagement"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "79289-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_cases.api.system_manager.users.test_user_management"}]}